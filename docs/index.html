<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Austin Izzo" />


<title>GEO-511 Semester Project</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Data Science Final Project </a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="interactive.html">Interactive Map</a>
</li>
<li>
  <a href="tables.html">Raw Data</a>
</li>
<li>
  <a href="sources.html">References/Sources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">GEO-511 Semester Project</h1>
<h3 class="subtitle">Modeling the relationship between community solar projects and the incentives in the US.</h3>
<h4 class="author">Austin Izzo</h4>

</div>


<style>                     
.navbar {
  background-color:grey;
  border-color:black;
}
.navbar-brand {
color:black!important;
}
</style>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>With the expansion of solar energy throughout the United States in the past year, community solar projects have become increasingly popular. Community solar projects often consist of a partnership between the public, government entities and the business sector to install solar energy throughout a community. The outcomes of such programs can be prosperous for all entities involved. Although a seemingly common sense solution to part of the nation’s energy challenge, community solar projects are a relatively new concept and spatial trends in where these projects are taking place.</p>
<p>Research Question: In this analysis, the goal will be to identify what role financial incentives play in the installment of projects in the US.</p>
<hr />
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<ol style="list-style-type: decimal">
<li>Extract all data into R creating separate tables for each. The an extensive list of the community solar projects will be retrieved from the NREL database. Multiple tables with data relating to solar power incentives will be retrieved from the DSIRE database (the csv files held on github). Lastly, the basemaps will be sourced from the spData package.</li>
<li>Convert source 1 into a tibble</li>
<li>Join source 1 and source 3 by county</li>
<li>Identify what county each solar project is in and create column in source 2 table for this.</li>
<li>Create two maps on with the counties either red or blue or political affiliation and the other displaying a color gradient (fill in ggplot) to display the public perception for each county.</li>
<li>Now the solar projects will be mapped to each maps.</li>
<li>Sections will be created in the report for the impact of either public perception or political affiliation.</li>
<li>Within each section the visuals that will be included will be:</li>
<li>Scatter Plot of variable vs solar projects</li>
<li>Scatter Plot of variable vs size of system</li>
<li>Summary Tables for each variable</li>
</ol>
<hr />
</div>
<div id="code-chunks" class="section level1">
<h1>Code Chunks</h1>
<ol style="list-style-type: decimal">
<li>Load any required packages:</li>
</ol>
<pre class="r"><code>#Load neccessary Libraries
library(dbplyr)
library(jsonlite)
#install.packages(&quot;xml2&quot;)
library(xml2)
library(readr)
#install.packages(&quot;readxl&quot;)
library(readxl)
library(sf)
library(ggplot2)
library(sf)
library(tidyverse)
#install.packages(&quot;spData&quot;)
library(spData)
#install.packages(&quot;maps&quot;)
library(maps)
library(formattable)
library(knitr)
library(kableExtra)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Download and clean all required data</li>
</ol>
<pre class="r"><code>#Load in all of the DSIRE datasets
NREL_url &lt;- &quot;https://data.nrel.gov/files/114/NREL_Community_Solar_Project_List_6_28_2019%20FINAL.xlsx&quot;
NREL_path &lt;- &quot;NREL_Community_Solar_Project_List_6_28_2019FINAL.xlsx&quot;
NREL_Data &lt;- read_xlsx(NREL_path, sheet = 2)
names(NREL_Data) &lt;- c(&quot;Project&quot;, &quot;City&quot;, &quot;State&quot;, &quot;Utility&quot;, &quot;Size(kWh)&quot;,&quot;Year&quot;,&quot;Latitude&quot;, &quot;Longitude&quot;)

Harvard_url &lt;- &quot;https://dataverse.harvard.edu/api/access/datafile/:persistentId?persistentId=doi:10.7910/DVN/VOQCHQ/FQ9NBF&quot;
Harvard_Data &lt;- read_tsv(Harvard_url)

state_geom&lt;- map_data(&quot;state&quot;)

DSIRE_program &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/program.csv&quot;)
DSIRE_parameter_set &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/parameter_set.csv&quot;)
DSIRE_parameter &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/parameter.csv&quot;)
DSIRE_state &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/state.csv&quot;)
names(DSIRE_state)&lt;- c(&quot;state_id&quot;, &quot;abbreviation&quot;, &quot;name&quot;, &quot;is_territory&quot;)
DSIRE_program_tech &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/program_technology.csv&quot;)
DSIRE_technology &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/technology.csv&quot;)
DSIRE_technology_category &lt;- read_csv(&quot;https://raw.githubusercontent.com/geo511-2019/2019-geo511-project-austin3087/master/technology_category.csv&quot;)</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Join the DSIRE datasets <img src="Data_Structure.png" alt="Data Structure Representation" /></li>
</ol>
<pre class="r"><code>#Join the DSIRE datasets by their relevant keys creating one &quot;Final&quot; table with relevant information. See data relationship chart above to identify how tables are related. 
DSIRE_program2 &lt;- inner_join(DSIRE_program,DSIRE_state, by = &quot;state_id&quot;)%&gt;%
  inner_join(DSIRE_parameter_set, by = c(&quot;id&quot; = &quot;program_id&quot;))%&gt;%
  inner_join(DSIRE_parameter, by = c(&quot;id&quot; = &quot;parameter_set_id&quot;))%&gt;%
  inner_join(DSIRE_program_tech, by = c(&quot;id&quot; = &quot;program_id&quot;))%&gt;%
  inner_join(DSIRE_technology, by = c(&quot;technology_id&quot; = &quot;id&quot;))
DSIRE_program_final &lt;- inner_join(DSIRE_program2, DSIRE_technology_category, by = c(&quot;technology_id&quot; = &quot;id&quot;))</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Identify number &amp; mean of solar incentives per state</li>
</ol>
<pre class="r"><code>#Filter table for solar photovoltaics
DSIRE_program_table &lt;- DSIRE_program_final%&gt;%
  filter(is_entire_state == 1)%&gt;%
  filter(name.x.x == &quot;Solar Photovoltaics&quot;)%&gt;%
  filter(is_territory == 0)
kwh_total_state &lt;- DSIRE_program_table%&gt;%
  group_by(name.y)%&gt;%
   summarize(Total = n())
names(kwh_total_state)&lt;- c(&quot;State&quot;,&quot;Total&quot;)
kwh_total_state$State &lt;- tolower(kwh_total_state$State)

kwh_mean_state &lt;- DSIRE_program_table%&gt;%
  group_by(name.y)%&gt;%
  filter(units == &quot;$&quot;)%&gt;% #note only using $ values that are given, multiple other units given too in table but needed to be filtered for this analysis
  summarize(Total = mean(amount))
names(kwh_mean_state)&lt;- c(&quot;State&quot;, &quot;Average&quot;)
kwh_mean_state$State &lt;- tolower(kwh_mean_state$State)</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Create spatial distribution plot:</li>
</ol>
<pre class="r"><code>#Create Custom theme 
theme_black_nol&lt;- theme(plot.background = element_rect(fill = &#39;#222222&#39;), panel.background = element_rect(fill = NA),panel.border = element_rect(fill = NA), panel.grid = element_line(color = NA), axis.title = element_blank(), legend.position = &quot;none&quot;, plot.margin = unit(c(0,0,0,0),&quot;cm&quot;), axis.text = element_blank(), axis.line = element_blank())

theme_black&lt;- theme(plot.background = element_rect(fill = &#39;#222222&#39;), panel.background = element_rect(fill = NA),panel.border = element_rect(fill = NA), panel.grid = element_line(color = NA), axis.title = element_blank(), plot.margin = unit(c(0,0,0,0),&quot;cm&quot;), axis.text = element_blank(), axis.line = element_blank())



DSIRE_program_table1 &lt;- full_join(kwh_total_state, state_geom, by = c(&quot;State&quot; = &quot;region&quot;))

#Plot just Community Locationsadd state geometry to DSIRE data to plot
plot1 &lt;- ggplot()+
  geom_polygon(data = state_geom, aes(x = long, y = lat, group = group ), fill = &#39;#222222&#39;, col = &quot;#ba5454&quot;)+
  coord_fixed(ratio = 1.2)+
  geom_point(NREL_Data, mapping = aes(x = Longitude , y = Latitude, alpha = .85), col = &quot;#6ca2b8&quot;)+
  theme_black_nol</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>Plot Spatial Distribution along w/ shaded mean incentive per state</li>
</ol>
<pre class="r"><code>DSIRE_program_table2 &lt;- full_join(kwh_mean_state, state_geom, by = c(&quot;State&quot; = &quot;region&quot;))

plot2 &lt;- ggplot()+
  geom_polygon(data = DSIRE_program_table2, aes(x = long, y = lat, group = group, fill = Average), col = &quot;#ba5454&quot;)+
  coord_fixed(1.2)+
  geom_point(NREL_Data, mapping = aes(x = Longitude , y = Latitude), col = &quot;#6ca2b8&quot;, alpha = .8)+
  theme_black+
  scale_fill_gradient(low = &quot;#496692&quot;, high = &quot;#000E23&quot;)</code></pre>
<ol start="8" style="list-style-type: decimal">
<li>Plot spatial distribution along w/ shaded quantity incentive per state</li>
</ol>
<pre class="r"><code>DSIRE_program_table3 &lt;- full_join(kwh_total_state, state_geom, by = c(&quot;State&quot; = &quot;region&quot;))

plot3 &lt;- ggplot()+
  geom_polygon(data = DSIRE_program_table3, aes(x = long, y = lat, group = group, fill = Total), col = &quot;#ba5454&quot;)+
  coord_fixed(1.2)+
  geom_point(NREL_Data, mapping = aes(x = Longitude , y = Latitude), col = &quot;#6ca2b8&quot;, alpha = .8)+
  theme_black+
  scale_fill_gradient(low = &quot;#496692&quot;, high = &quot;#000E23&quot;)</code></pre>
<hr />
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>Spatial Distibution of Community Solar Installations - Provided by NREL <img src="index_files/figure-html/unnamed-chunk-8-1.png" width="746.4" /> <br><br> Spatial Distibution of Community Solar Installations w/ Incentives shaded per $ - Provided by NREL &amp; DSIRE data <img src="index_files/figure-html/unnamed-chunk-9-1.png" width="746.4" /> <br><br></p>
<p>Spatial Distibution of Community Solar Installations w/ Incentives shaded per quantity - Provided by NREL &amp; DSIRE data <img src="index_files/figure-html/unnamed-chunk-10-1.png" width="746.4" /></p>
<hr />
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="https://wilsonlab.io/GEO511"><i> Spatial Data Science (GEO511) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>


</body>
</html>
